@*  Index.cshtml
 *  Version: v1.4 (2023.10.30)
 *
 *  Contributor
 *      Arime-chan
*@

@page
@using Project24.App.Utils;
@model IndexModel
@{
    Layout = P24PageLayout.CommonLayout;
    ViewData[ViewDataKeys.Title] = m_LocalizationSvc[LOCL.PAGE_INDEX];

    string btnWidth = "20em";
    string classModule = "d-flex flex-wrap my-2 mx-2";
    string classModuleDescription = "ms-2";
}

<div class="fs-2 my-2">@MiscUtils.HtmlDisplay(m_LocalizationSvc[LOCL.DESC_INDEX_WELCOME])</div>
<p>
    <div class="fs-4">@MiscUtils.HtmlDisplay(m_LocalizationSvc[LOCL.DESC_INDEX_WHATS_NEW])</div>

    @MiscUtils.HtmlDisplay("<div>" + m_LocalizationSvc[LOCL.DESC_INDEX_WHATS_NEW_LONG].Replace("\\n", "</div><div>") + "</div>")
</p>


<hr />
@{
    var cmInfo = P24DesignMap.GetProgressForCMModule();
    var nasInfo = P24DesignMap.GetProgressForNasModule();
    var homeInfo = P24DesignMap.GetProgressForHomeModule();

    string totalPercent = ((cmInfo.Item1 + nasInfo.Item1 + homeInfo.Item1) * 100.0f / (cmInfo.Item2 + nasInfo.Item2 + homeInfo.Item2)).ToString("0.00") + "%";

    string cmPercent = cmInfo.Percent.ToString("0.00") + "%";
    string nasPercent = nasInfo.Percent.ToString("0.00") + "%";
    string homePercent = homeInfo.Percent.ToString("0.00") + "%";
}
<div class="fs-4 my-2">@MiscUtils.HtmlDisplay(m_LocalizationSvc[LOCL.DESC_CURRENT_PROGRESS]): @totalPercent</div>

<div class="@classModule">
    <a asp-page="ClinicManager/Index" class="btn btn-primary disabled" style="width:@btnWidth">
        <div style="font-size: larger">Clinic Manager</div>
        <div style="font-size: small">(ClinicManager/Index)</div>
    </a>
    <div class="@classModuleDescription">
        <div class="fs-4"><code>@cmPercent</code></div>
    </div>
</div>

<div class="@classModule">
    <a asp-page="Nas/Index" class="btn btn-primary disabled" style="width:@btnWidth">
        <div style="font-size: larger">NAS</div>
        <div style="font-size: small">(Nas/Index)</div>
    </a>
    <div class="@classModuleDescription">
        <div class="fs-4"><code>@nasPercent</code></div>
    </div>
</div>

<div class="@classModule">
    <a asp-page="Home/Index" class="btn btn-primary" style="width:@btnWidth">
        <div style="font-size: larger">Dashboard</div>
        <div style="font-size: small">(Home/Index)</div>
    </a>
    <div class="@classModuleDescription">
        <div class="fs-4"><code>@homePercent</code></div>
    </div>
</div>


<hr />
@{
    int entryCount = typeof(LOCL).GetFields().Length;

    int totalVieEntryCount = entryCount + m_LocalizationSvc.GetFrontEndLocalizationStatus(LocalizationSvc.SupportedLocale.VI_VN).TotalEntries;
    int totalEngEntryCount = entryCount + m_LocalizationSvc.GetFrontEndLocalizationStatus(LocalizationSvc.SupportedLocale.EN_US).TotalEntries;
    int totalJapEntryCount = entryCount + m_LocalizationSvc.GetFrontEndLocalizationStatus(LocalizationSvc.SupportedLocale.JA_JP).TotalEntries;

    int vieEntryCount = m_LocalizationSvc.GetAllLocalizedStrings(LocalizationSvc.SupportedLocale.VI_VN).Length
        + m_LocalizationSvc.GetFrontEndLocalizationStatus(LocalizationSvc.SupportedLocale.VI_VN).TranslatedEntries;
    int engEntryCount = m_LocalizationSvc.GetAllLocalizedStrings(LocalizationSvc.SupportedLocale.EN_US).Length
        + m_LocalizationSvc.GetFrontEndLocalizationStatus(LocalizationSvc.SupportedLocale.EN_US).TranslatedEntries;
    int japEntryCount = m_LocalizationSvc.GetAllLocalizedStrings(LocalizationSvc.SupportedLocale.JA_JP).Length
        + m_LocalizationSvc.GetFrontEndLocalizationStatus(LocalizationSvc.SupportedLocale.JA_JP).TranslatedEntries;

    int localizedEntriesCount = vieEntryCount + engEntryCount + japEntryCount;
    int totalEntriesCount = totalVieEntryCount + totalEngEntryCount + totalJapEntryCount;

    string viePercent = (vieEntryCount * 100.0 / totalVieEntryCount).ToString("0.00") + "%";
    string engPercent = (engEntryCount * 100.0 / totalEngEntryCount).ToString("0.00") + "%";
    string japPercent = (japEntryCount * 100.0 / totalJapEntryCount).ToString("0.00") + "%";

    string totalTransPercent = ((vieEntryCount + engEntryCount + japEntryCount) * 100.0 / (entryCount * 3)).ToString("0.00") + "%";
}
<div class="fs-4 my-2">@MiscUtils.HtmlDisplay(m_LocalizationSvc[LOCL.DESC_TRANSLATION_PROGRESS]): @totalTransPercent (@localizedEntriesCount/@totalEntriesCount)</div>

<div class="d-flex flex-wrap">
    <div class="col-12 col-md-2"><span style="width:15em">Tiếng Việt: </span><code>@viePercent (@vieEntryCount/@totalVieEntryCount)</code></div>
    <div class="col-12 col-md-10">
        <div class="progress">
            <div class="progress-bar" style="width:@viePercent"></div>
        </div>
    </div>
</div>
<div class="d-flex flex-wrap">
    <div class="col-12 col-md-2"><span style="width:15em">English: </span><code>@engPercent (@engEntryCount/@totalEngEntryCount)</code></div>
    <div class="col-12 col-md-10">
        <div class="progress">
            <div class="progress-bar" style="width:@engPercent"></div>
        </div>
    </div>
</div>
<div class="d-flex flex-wrap">
    <div class="col-12 col-md-2"><span style="width:15em">日本語: </span><code>@japPercent (@japEntryCount/@totalJapEntryCount)</code></div>
    <div class="col-12 col-md-10">
        <div class="progress">
            <div class="progress-bar" style="width:@japPercent"></div>
        </div>
    </div>
</div>



@if (false)
{
    <div class="text-center">
        <div class="d-flex align-items-center justify-content-center">
            <a asp-page="Home/Index" class="btn btn-secondary m-2" style="width: 50ch">
                <div style="font-size: larger">Dashboard</div>
                <div style="font-size: small">(Home/Index)</div>
            </a>
        </div>
    </div>
}
